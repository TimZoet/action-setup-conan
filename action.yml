name: 'Setup Conan'
description: 'Install the Conan Python package and retrieve and install profiles repository.'
runs:
  using: "composite"
  steps:
      #- name: Install latest Conan
      #  id: conan
      #  uses: turtlebrowser/get-conan@main
      #- name: Conan version
      #  run: echo "${{ steps.conan.outputs.version }}"
      #  shell: bash
      - name: Retrieve custom Conan
        uses: actions/checkout@v3
        with:
          repository: TimZoet/conan
          ref: feature/graph_builder_callback
          path: ${{ github.workspace }}/conan
      - name: Install custom Conan
        run: |
          cd "${{ github.workspace }}/conan"
          pip install .
        shell: bash
      - name: Conan config install
        run: conan config install --type git https://github.com/TimZoet/conan-config.git
        shell: bash
